<div class="page">
    <p>Monthly Results</p>
    <table>
        <tr class="bb1 tblhead">
            <td>ID</td>
            <td>Date</td>
            <td>Income</td>
            <td>Expense</td>
            <td>Flow</td>
            <td>Income/D</td>
            <td>Expense/D</td>
            <td>Flow/D</td>
            <td>Cumulated</td>
            <td></td>
        </tr>
    </table>
    <div *ngFor="let monthlyResult of monthlyResults">
        <table>
            <tr class="bb1">
                <td>{{monthlyResult.id}}</td>
                <td>{{monthlyResult.dateString}}</td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.income, 500000)}">
                    {{gl.AddThousandPoints(monthlyResult.income)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.expense, 250000, true)}">
                    -{{gl.AddThousandPoints(monthlyResult.expense)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.flow, 300000)}">
                    {{gl.AddThousandPoints(monthlyResult.flow)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.incomePerDay, 20000)}">
                    {{(monthlyResult.incomePerDay)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.expensePerDay, 15000, true)}">
                    -{{(monthlyResult.expensePerDay)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.flowPerDay, 20000)}">
                    {{(monthlyResult.flowPerDay)}}
                </td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(monthlyResult.cumulatedFlow, 1700000)}">
                    {{gl.AddThousandPoints(monthlyResult.cumulatedFlow)}}
                </td>
                <td>
                    <button (click)="ToggleSums(monthlyResult)">
                        <span *ngIf="!monthlyResult.isSumsOpen">+</span>
                        <span *ngIf="monthlyResult.isSumsOpen">-</span>
                    </button>
                    <span>({{monthlyResult.sums.length}})</span>
                </td>
            </tr>
        </table>
        <table *ngIf="monthlyResult.isSumsOpen">
            <tr *ngFor="let sum of monthlyResult.sums">
                <td>{{sum.Id}}</td>
                <td>{{gl.ToSimpleDate(sum.InputDate)}}</td>
                <td>{{sum.Title}}</td>
                <td class="num" [ngStyle]="{'background-color': gl.GetColourOpacity(sum.Sum, 50000)}">{{sum.Sum}}</td>
            </tr>
        </table>
    </div>
</div>